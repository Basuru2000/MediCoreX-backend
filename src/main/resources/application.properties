# =====================================================
# DATABASE CONFIGURATION
# =====================================================
spring.datasource.url=jdbc:mysql://localhost:3306/medicorex_db?useSSL=false&serverTimezone=UTC&createDatabaseIfNotExist=true&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=mysql123
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# =====================================================
# JPA CONFIGURATION
# =====================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# =====================================================
# SERVER CONFIGURATION
# =====================================================
server.port=8080
server.error.include-message=always

# =====================================================
# JWT CONFIGURATION
# =====================================================
jwt.secret=404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970
jwt.expiration=86400000

# =====================================================
# FILE UPLOAD CONFIGURATION
# =====================================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
file.upload-dir=./uploads
file.allowed-extensions=jpg,jpeg,png,gif,webp
file.max-size=5242880

# =====================================================
# APPLICATION INFO
# =====================================================
spring.application.name=MediCoreX Backend API
app.version=1.0.0

# =====================================================
# SPRING BOOT ACTUATOR
# =====================================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.health.db.enabled=true
management.health.diskspace.enabled=true

# =====================================================
# JACKSON CONFIGURATION
# =====================================================
spring.jackson.date-format=yyyy-MM-dd
spring.jackson.time-zone=UTC

# =====================================================
# TASK EXECUTION & SCHEDULING (COMBINED)
# =====================================================
# Thread Pool for Async Tasks
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=Async-

# Thread Pool for Scheduled Tasks
spring.task.scheduling.pool.size=10
spring.task.scheduling.thread-name-prefix=Scheduler-

# =====================================================
# EXPIRY MONITORING CONFIGURATION
# =====================================================
expiry.check.enabled=true
expiry.check.time=02:00:00
expiry.check.timezone=UTC
expiry.check.allow-multiple-manual=true

# =====================================================
# BATCH MANAGEMENT CONFIGURATION
# =====================================================
batch.auto-mark-expired=true
batch.fifo-consumption=true
batch.allow-negative-stock=false

# =====================================================
# QUARANTINE MODULE CONFIGURATION
# =====================================================
quarantine.auto.enabled=true
quarantine.auto.cron=0 30 2 * * *
quarantine.review.timeout.days=7
quarantine.escalation.enabled=true
quarantine.escalation.days=3
quarantine.notification.enabled=true
quarantine.approval.required=true

# Disposal Configuration
quarantine.disposal.methods=Incineration,Chemical Treatment,Return to Supplier,Donation,Other
quarantine.disposal.certificate.required=true

# Report Configuration
quarantine.report.retention.days=90
quarantine.report.format=PDF,EXCEL

# =====================================================
# NOTIFICATION SYSTEM CONFIGURATION
# =====================================================
# Core Settings
notification.enabled=true
notification.batch.size=100
notification.cleanup.days=90
notification.expire.low.priority.days=30

# Category Settings
notification.category.quarantine.enabled=true
notification.category.stock.enabled=true
notification.category.expiry.enabled=true
notification.category.batch.enabled=true
notification.category.user.enabled=true
notification.category.system.enabled=true
notification.category.approval.enabled=true
notification.category.report.enabled=true

# Priority Settings
notification.priority.critical.enabled=true
notification.priority.high.enabled=true
notification.priority.medium.enabled=true
notification.priority.low.enabled=true

# Real-time Settings
notification.realtime.enabled=true
notification.polling.interval.seconds=30

# Cleanup Settings
notification.cleanup.enabled=true
notification.cleanup.archive.days=90
notification.cleanup.expired.days=30
notification.cleanup.cron=0 0 3 * * ?

# Template Cache Settings
notification.template.cache.enabled=true
notification.template.cache.ttl.minutes=60

# =====================================================
# LOGGING CONFIGURATION
# =====================================================
# Security and Authentication Logging
logging.level.com.medicorex.config=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.authentication=TRACE
logging.level.org.springframework.security.crypto.bcrypt=TRACE

# Enhanced Debug Logging for Notifications
logging.level.com.medicorex.service.NotificationService=TRACE
logging.level.com.medicorex.service.ProductBatchService=DEBUG
logging.level.com.medicorex.service.UserService=DEBUG
logging.level.com.medicorex.service.quarantine.QuarantineService=DEBUG

# Controllers
logging.level.com.medicorex.controller.NotificationController=DEBUG
logging.level.com.medicorex.controller.NotificationDebugController=DEBUG
logging.level.com.medicorex.controller.NotificationDirectTestController=DEBUG

# Repositories
logging.level.com.medicorex.repository.UserRepository=DEBUG
logging.level.com.medicorex.repository.NotificationRepository=DEBUG

# Configuration
logging.level.com.medicorex.config.AsyncConfig=DEBUG
logging.level.com.medicorex.config.NotificationTemplateDataLoader=DEBUG

# Spring async and scheduling
logging.level.org.springframework.scheduling.annotation=DEBUG
logging.level.org.springframework.aop.interceptor=DEBUG

# Hibernate SQL Logging
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log File Configuration
#logging.file.name=medicorex-debug.log
logging.file.max-size=10MB
logging.file.max-history=5

# Pattern for better readability
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger - %msg%n

# DISABLE FILE LOGGING
spring.main.banner-mode=off
# logging.file.name=medicorex-debug.log
logging.level.root=WARN
logging.level.com.medicorex=INFO

# Notification Preferences Configuration
notification.preferences.default.enabled=true
notification.preferences.default.priority=LOW
notification.preferences.quiet-hours.respect-critical=true
notification.preferences.digest.default-time=09:00
notification.preferences.digest.batch-size=50
notification.preferences.escalation.timeout-hours=24

# Critical Alerts Configuration
expiry.summary.cache.enabled=true
expiry.summary.cache.ttl.minutes=5
expiry.summary.critical.days=7
expiry.summary.financial.calculation.enabled=true

# EXPIRY TREND ANALYSIS CONFIGURATION
expiry.trends.enabled=true
expiry.trends.snapshot.cron=0 0 3 * * ?
expiry.trends.cache.ttl.minutes=15
expiry.trends.prediction.enabled=true
expiry.trends.prediction.algorithm=MOVING_AVERAGE
expiry.trends.prediction.confidence.threshold=70
expiry.trends.export.enabled=true
expiry.trends.retention.days=365

# Trend Analysis Parameters
expiry.trends.analysis.min-data-points=7
expiry.trends.analysis.default-days-back=30
expiry.trends.analysis.category.enabled=true
expiry.trends.analysis.insights.enabled=true

# Calendar-specific configurations
expiry.calendar.cache.enabled=true
expiry.calendar.cache.ttl.minutes=15
expiry.calendar.default.view=MONTH
expiry.calendar.max.events.per.day=10
expiry.calendar.refresh.cron=0 */15 * * * ?

# Cache configuration
spring.cache.type=caffeine
spring.cache.cache-names=calendarData,currentTrends,userPreferences,notifications,trendAnalysis,predictions
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=15m

# =====================================================
# WEBSOCKET CONFIGURATION
# =====================================================
# WebSocket endpoint configuration
websocket.endpoint=/ws
websocket.allowed-origins=http://localhost:5173,http://localhost:5174
websocket.heartbeat.interval=30000
websocket.connection.timeout=60000

# STOMP configuration
spring.websocket.stomp.thread-pool-size=10
spring.websocket.stomp.client-inbound-thread-pool-size=10
spring.websocket.stomp.client-outbound-thread-pool-size=10

# Message broker configuration
spring.websocket.message-broker.enabled=true
spring.websocket.message-broker.prefixes=/topic,/queue
spring.websocket.message-broker.application-prefix=/app
spring.websocket.message-broker.user-destination-prefix=/user

# WebSocket message size limits
spring.websocket.message-size.limit=65536
spring.websocket.send-buffer-size.limit=524288
spring.websocket.send-time-limit=20000

# SockJS configuration (fallback support)
spring.websocket.sockjs.enabled=true
spring.websocket.sockjs.heartbeat-time=25000
spring.websocket.sockjs.disconnect-delay=5000
spring.websocket.sockjs.http-message-cache-size=100
spring.websocket.sockjs.stream-bytes-limit=131072

# WebSocket session configuration
spring.websocket.session.max-idle-timeout=900000
spring.websocket.session.max-binary-message-buffer-size=65536
spring.websocket.session.max-text-message-buffer-size=65536


# Static Resources Configuration
spring.web.resources.static-locations=classpath:/static/,file:./uploads/
spring.mvc.static-path-pattern=/**

# Spring Data Web Configuration
spring.data.web.pageable.default-page-size=25
spring.data.web.pageable.max-page-size=100
spring.data.web.pageable.one-indexed-parameters=false
spring.data.web.pageable.page-parameter=page
spring.data.web.pageable.size-parameter=size


# Metrics Configuration
metrics.calculation.enabled=true
metrics.calculation.default-month-day=1
metrics.alert.threshold=60.0
metrics.weights.delivery=0.30
metrics.weights.quality=0.35
metrics.weights.compliance=0.20
metrics.weights.cost=0.15

